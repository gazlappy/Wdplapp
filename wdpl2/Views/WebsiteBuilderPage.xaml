<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Wdpl2.Views.WebsiteBuilderPage"
             Title="Website Builder">
    
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- Header -->
            <Label Text="Website Builder"
                   FontSize="28"
                   FontAttributes="Bold"
                   TextColor="#3B82F6"/>
            
            <Label Text="Design and publish your league website"
                   FontSize="14"
                   TextColor="#6B7280"/>
            
            <!-- Season Selection -->
            <Frame BorderColor="#E5E7EB" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Season" FontAttributes="Bold" FontSize="16"/>
                    <Picker x:Name="SeasonPicker" Title="Select Season"/>
                    <Label Text="Select which season data to publish on the website"
                           FontSize="12"
                           TextColor="#6B7280"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Site Branding -->
            <Frame BorderColor="#E5E7EB" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Site Branding" FontAttributes="Bold" FontSize="16"/>
                    
                    <Label Text="League Name" FontSize="14"/>
                    <Entry x:Name="LeagueNameEntry" Placeholder="e.g., West Division Pool League"/>
                    
                    <Label Text="Subtitle" FontSize="14"/>
                    <Entry x:Name="SubtitleEntry" Placeholder="e.g., Weekly 8-Ball Competition"/>
                    
                    <!-- Logo Upload -->
                    <Label Text="League Logo (Optional)" FontSize="14" Margin="0,10,0,0"/>
                    <HorizontalStackLayout Spacing="10">
                        <Button x:Name="UploadLogoBtn" 
                                Text="Upload Logo" 
                                Clicked="OnUploadLogoClicked"
                                BackgroundColor="#6B7280"/>
                        <Label x:Name="LogoStatusLabel" 
                               Text="No logo selected"
                               FontSize="12"
                               TextColor="#6B7280"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    <Image x:Name="LogoPreviewImage" 
                           HeightRequest="100" 
                           Aspect="AspectFit"
                           IsVisible="False"
                           Margin="0,5,0,0"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Template Selection -->
            <Frame BorderColor="#E5E7EB" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Template" FontAttributes="Bold" FontSize="16"/>
                    
                    <Picker x:Name="TemplatePicker" 
                            Title="Select Template"
                            SelectedIndexChanged="OnTemplateChanged"/>
                    
                    <Label x:Name="TemplateDescription" 
                           FontSize="12" 
                           TextColor="#6B7280"
                           IsVisible="False"/>
                    
                    <Label x:Name="TemplateFeatures" 
                           FontSize="11" 
                           TextColor="#9CA3AF"
                           IsVisible="False"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Color Theme -->
            <Frame BorderColor="#E5E7EB" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Color Theme" FontAttributes="Bold" FontSize="16"/>
                    
                    <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10" RowSpacing="10">
                        <VerticalStackLayout Grid.Column="0" Spacing="5">
                            <Label Text="Primary" FontSize="12"/>
                            <Entry x:Name="PrimaryColorEntry" Placeholder="#3B82F6"/>
                        </VerticalStackLayout>
                        
                        <VerticalStackLayout Grid.Column="1" Spacing="5">
                            <Label Text="Secondary" FontSize="12"/>
                            <Entry x:Name="SecondaryColorEntry" Placeholder="#10B981"/>
                        </VerticalStackLayout>
                        
                        <VerticalStackLayout Grid.Column="2" Spacing="5">
                            <Label Text="Accent" FontSize="12"/>
                            <Entry x:Name="AccentColorEntry" Placeholder="#F59E0B"/>
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Content Options -->
            <Frame BorderColor="#E5E7EB" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Pages to Include" FontAttributes="Bold" FontSize="16"/>
                    
                    <HorizontalStackLayout Spacing="10">
                        <CheckBox x:Name="ShowStandingsCheck" IsChecked="True"/>
                        <Label Text="League Standings" VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <CheckBox x:Name="ShowFixturesCheck" IsChecked="True"/>
                        <Label Text="Fixtures Schedule" VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <CheckBox x:Name="ShowResultsCheck" IsChecked="True"/>
                        <Label Text="Match Results" VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <CheckBox x:Name="ShowPlayerStatsCheck" IsChecked="True"/>
                        <Label Text="Player Statistics" VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <CheckBox x:Name="ShowDivisionsCheck" IsChecked="True"/>
                        <Label Text="Division Information" VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    
                    <HorizontalStackLayout Spacing="10">
                        <CheckBox x:Name="ShowGalleryCheck" IsChecked="False"/>
                        <Label Text="Photo Gallery" VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Photo Gallery -->
            <Frame BorderColor="#E5E7EB" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="10">
                    <Label Text="üì∑ Photo Gallery" FontAttributes="Bold" FontSize="16"/>
                    
                    <Label Text="Add team photos, match photos, and event images to your website"
                           FontSize="12"
                           TextColor="#6B7280"/>
                    
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button Grid.Column="0"
                                x:Name="AddGalleryImageBtn"
                                Text="Add Photos"
                                Clicked="OnAddGalleryImagesClicked"
                                BackgroundColor="#3B82F6"/>
                        
                        <Button Grid.Column="1"
                                x:Name="ManageGalleryBtn"
                                Text="Manage Gallery"
                                Clicked="OnManageGalleryClicked"
                                BackgroundColor="#6B7280"/>
                    </Grid>
                    
                    <Label x:Name="GalleryCountLabel" 
                           Text="No images in gallery"
                           FontSize="12"
                           TextColor="#6B7280"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Deployment Method Selection -->
            <Frame BorderColor="#3B82F6" Padding="15" CornerRadius="8" BackgroundColor="#EFF6FF">
                <VerticalStackLayout Spacing="10">
                    <Label Text="üöÄ Deployment Method" FontAttributes="Bold" FontSize="16"/>
                    
                    <Label Text="Choose how you want to publish your website"
                           FontSize="12"
                           TextColor="#6B7280"/>
                    
                    <Picker x:Name="DeploymentMethodPicker" 
                            Title="Select Deployment Method"
                            SelectedIndexChanged="OnDeploymentMethodChanged">
                        <Picker.ItemsSource>
                            <x:Array Type="{x:Type x:String}">
                                <x:String>üìÅ Local Export (Save to folder)</x:String>
                                <x:String>üêô GitHub Pages (Free hosting)</x:String>
                                <x:String>üì§ FTP Upload (Traditional hosting)</x:String>
                            </x:Array>
                        </Picker.ItemsSource>
                    </Picker>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Local Export Settings -->
            <Frame x:Name="LocalExportFrame" BorderColor="#E5E7EB" Padding="15" CornerRadius="8" IsVisible="False">
                <VerticalStackLayout Spacing="10">
                    <Label Text="üìÅ Local Export" FontAttributes="Bold" FontSize="16"/>
                    
                    <Label Text="Export your website files to a folder on your device. You can then upload them manually to any web host, or open them directly in a browser."
                           FontSize="12"
                           TextColor="#6B7280"/>
                    
                    <Frame BackgroundColor="#F0FDF4" BorderColor="#86EFAC" Padding="10" CornerRadius="6">
                        <VerticalStackLayout Spacing="5">
                            <Label Text="‚úì No account required" FontSize="12" TextColor="#166534"/>
                            <Label Text="‚úì Works offline" FontSize="12" TextColor="#166534"/>
                            <Label Text="‚úì Full control over files" FontSize="12" TextColor="#166534"/>
                            <Label Text="‚úì Upload anywhere you want" FontSize="12" TextColor="#166534"/>
                        </VerticalStackLayout>
                    </Frame>
                    
                    <Button x:Name="ExportToFolderBtn"
                            Text="üìÅ Export to Folder"
                            Clicked="OnExportToFolderClicked"
                            BackgroundColor="#10B981"/>
                    
                    <Button x:Name="ExportAsZipBtn"
                            Text="üì¶ Export as ZIP"
                            Clicked="OnExportAsZipClicked"
                            BackgroundColor="#6B7280"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- GitHub Pages Settings -->
            <Frame x:Name="GitHubFrame" BorderColor="#E5E7EB" Padding="15" CornerRadius="8" IsVisible="False">
                <VerticalStackLayout Spacing="10">
                    <Label Text="üêô GitHub Pages" FontAttributes="Bold" FontSize="16"/>
                    
                    <Label Text="Host your website for free on GitHub Pages. Your site will be available at username.github.io/repository-name"
                           FontSize="12"
                           TextColor="#6B7280"/>
                    
                    <Frame BackgroundColor="#F0FDF4" BorderColor="#86EFAC" Padding="10" CornerRadius="6">
                        <VerticalStackLayout Spacing="5">
                            <Label Text="‚úì 100% Free hosting" FontSize="12" TextColor="#166534"/>
                            <Label Text="‚úì Automatic HTTPS" FontSize="12" TextColor="#166534"/>
                            <Label Text="‚úì Global CDN" FontSize="12" TextColor="#166534"/>
                            <Label Text="‚úì Custom domain support" FontSize="12" TextColor="#166534"/>
                        </VerticalStackLayout>
                    </Frame>
                    
                    <Label Text="GitHub Personal Access Token" FontSize="14" Margin="0,10,0,0"/>
                    <Entry x:Name="GitHubTokenEntry" 
                           Placeholder="ghp_xxxxxxxxxxxx" 
                           IsPassword="True"/>
                    <Label Text="Create a token at github.com/settings/tokens with 'repo' scope"
                           FontSize="11"
                           TextColor="#9CA3AF"/>
                    
                    <Label Text="Repository Name" FontSize="14"/>
                    <Entry x:Name="GitHubRepoEntry" Placeholder="my-pool-league"/>
                    
                    <Label Text="GitHub Username" FontSize="14"/>
                    <Entry x:Name="GitHubUsernameEntry" Placeholder="your-username"/>
                    
                    <HorizontalStackLayout Spacing="10" Margin="0,5,0,0">
                        <CheckBox x:Name="GitHubCreateRepoCheck" IsChecked="True"/>
                        <Label Text="Create repository if it doesn't exist" VerticalOptions="Center" FontSize="12"/>
                    </HorizontalStackLayout>
                    
                    <Label x:Name="GitHubUrlPreview" 
                           Text="Your site will be at: https://username.github.io/repo"
                           FontSize="12"
                           TextColor="#3B82F6"
                           FontAttributes="Italic"/>
                    
                    <!-- GitHub Pages Status -->
                    <Frame x:Name="GitHubStatusFrame" 
                           BackgroundColor="#FEF3C7" 
                           BorderColor="#F59E0B" 
                           Padding="10" 
                           CornerRadius="6"
                           IsVisible="False">
                        <VerticalStackLayout Spacing="5">
                            <Label x:Name="GitHubStatusLabel" 
                                   Text="‚è≥ Status: Checking..." 
                                   FontSize="12" 
                                   TextColor="#92400E"/>
                            <Label Text="Note: GitHub Pages can take 1-5 minutes to build after deployment"
                                   FontSize="11"
                                   TextColor="#B45309"/>
                        </VerticalStackLayout>
                    </Frame>
                    
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                        <Button Grid.Column="0"
                                x:Name="DeployToGitHubBtn"
                                Text="üöÄ Deploy to GitHub Pages"
                                Clicked="OnDeployToGitHubClicked"
                                BackgroundColor="#238636"/>
                        
                        <Button Grid.Column="1"
                                x:Name="CheckGitHubStatusBtn"
                                Text="üìä Check Status"
                                Clicked="OnCheckGitHubStatusClicked"
                                BackgroundColor="#6B7280"
                                WidthRequest="120"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>
            
            <!-- FTP Settings -->
            <Frame x:Name="FtpFrame" BorderColor="#E5E7EB" Padding="15" CornerRadius="8" IsVisible="False">
                <VerticalStackLayout Spacing="10">
                    <Label Text="üì§ FTP Upload Settings" FontAttributes="Bold" FontSize="16"/>
                    
                    <Label Text="Upload directly to your web hosting via FTP"
                           FontSize="12"
                           TextColor="#6B7280"/>
                    
                    <Label Text="FTP Host" FontSize="14"/>
                    <Entry x:Name="FtpHostEntry" Placeholder="ftp.yourwebsite.com"/>
                    
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                        <VerticalStackLayout Grid.Column="0" Spacing="5">
                            <Label Text="Username" FontSize="14"/>
                            <Entry x:Name="FtpUsernameEntry" Placeholder="username"/>
                        </VerticalStackLayout>
                        
                        <VerticalStackLayout Grid.Column="1" Spacing="5">
                            <Label Text="Port" FontSize="14"/>
                            <Entry x:Name="FtpPortEntry" Placeholder="21" Keyboard="Numeric" WidthRequest="80"/>
                        </VerticalStackLayout>
                    </Grid>
                    
                    <Label Text="Password" FontSize="14"/>
                    <Entry x:Name="FtpPasswordEntry" Placeholder="password" IsPassword="True"/>
                    
                    <Label Text="Remote Path" FontSize="14"/>
                    <Entry x:Name="FtpPathEntry" Placeholder="/domains/yourdomain.com/public_html/"/>
                    <Label Text="For addon domains, use: /domains/yourdomain.com/public_html/"
                           FontSize="11"
                           TextColor="#9CA3AF"/>
                    
                    <Button x:Name="TestConnectionBtn" 
                            Text="Test Connection" 
                            Clicked="OnTestConnectionClicked"
                            BackgroundColor="#6B7280"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Status Label -->
            <Label x:Name="StatusLabel" 
                   FontSize="14"
                   TextColor="#10B981"
                   IsVisible="False"/>
            
            <!-- Progress Bar -->
            <ProgressBar x:Name="UploadProgress" 
                         IsVisible="False" 
                         ProgressColor="#3B82F6"/>
            
            <!-- WebView Preview Section -->
            <Frame x:Name="PreviewFrame" 
                   BorderColor="#E5E7EB" 
                   Padding="0" 
                   CornerRadius="8"
                   IsVisible="False">
                <VerticalStackLayout Spacing="0">
                    <!-- Preview Header -->
                    <Grid BackgroundColor="#F3F4F6" 
                          Padding="15" 
                          ColumnDefinitions="*,Auto,Auto">
                        <Label Grid.Column="0" 
                               Text="Live Preview" 
                               FontAttributes="Bold" 
                               FontSize="16"
                               VerticalOptions="Center"/>
                        
                        <Picker Grid.Column="1" 
                                x:Name="PreviewPagePicker"
                                Title="Select Page"
                                WidthRequest="150"
                                Margin="0,0,10,0"
                                SelectedIndexChanged="OnPreviewPageChanged"/>
                        
                        <Button Grid.Column="2"
                                Text="‚úï Close"
                                Clicked="OnClosePreviewClicked"
                                BackgroundColor="#EF4444"
                                TextColor="White"
                                WidthRequest="80"/>
                    </Grid>
                    
                    <!-- WebView -->
                    <WebView x:Name="PreviewWebView" 
                             HeightRequest="600"
                             WidthRequest="800"
                             HorizontalOptions="Fill"/>
                </VerticalStackLayout>
            </Frame>
            
            <!-- Action Buttons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Button Grid.Column="0"
                        x:Name="PreviewBtn"
                        Text="üëÅ Preview Website"
                        Clicked="OnPreviewClicked"
                        BackgroundColor="#3B82F6"/>
                
                <Button Grid.Column="1"
                        x:Name="GenerateBtn"
                        Text="üöÄ Deploy"
                        Clicked="OnDeployClicked"
                        BackgroundColor="#10B981"/>
            </Grid>
            
            <Button x:Name="SaveSettingsBtn"
                    Text="üíæ Save Settings"
                    Clicked="OnSaveSettingsClicked"
                    BackgroundColor="#6B7280"/>
            
            <!-- Info -->
            <Label Text="The website will be generated based on your selected season data and deployed using your chosen method."
                   FontSize="12"
                   TextColor="#9CA3AF"
                   HorizontalTextAlignment="Center"
                   Margin="0,10,0,0"/>
            
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
