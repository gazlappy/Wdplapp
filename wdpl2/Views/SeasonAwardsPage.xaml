<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="Wdpl2.Views.SeasonAwardsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Season Awards">

    <ScrollView>
        <VerticalStackLayout Padding="12" Spacing="16">
            
            <!-- Header -->
            <Label 
                Text="Season Awards &amp; Statistics" 
                Style="{StaticResource PageTitleStyle}" />
            
            <Label 
                x:Name="SeasonLabel"
                Text="No season selected"
                Style="{StaticResource SubheaderTextStyle}"
                Margin="0,0,0,8" />

            <!-- Most Improved Player -->
            <Border Style="{StaticResource CardBorderStyle}">
                <VerticalStackLayout Padding="12" Spacing="8">
                    <Label Text="[Trophy] Most Improved Player" FontAttributes="Bold" FontSize="16" TextColor="{StaticResource SuccessColor}" />
                    <Label x:Name="MostImprovedLabel" Text="-" FontSize="14" />
                    <Label x:Name="MostImprovedStatsLabel" Text="" Style="{StaticResource CaptionStyle}" />
                </VerticalStackLayout>
            </Border>

            <!-- Most 8-Balls -->
            <Border Style="{StaticResource CardBorderStyle}">
                <VerticalStackLayout Padding="12" Spacing="8">
                    <Label Text="[8-Ball] Most 8-Balls" FontAttributes="Bold" FontSize="16" TextColor="{StaticResource WarningColor}" />
                    <Label x:Name="Most8BallsLabel" Text="-" FontSize="14" />
                    <Label x:Name="Most8BallsStatsLabel" Text="" Style="{StaticResource CaptionStyle}" />
                </VerticalStackLayout>
            </Border>

            <!-- Highest Win Percentage -->
            <Border Style="{StaticResource CardBorderStyle}">
                <VerticalStackLayout Padding="12" Spacing="8">
                    <Label Text="[Star] Highest Win %" FontAttributes="Bold" FontSize="16" TextColor="{StaticResource InfoColor}" />
                    <Label x:Name="HighestWinPctLabel" Text="-" FontSize="14" />
                    <Label x:Name="HighestWinPctStatsLabel" Text="" Style="{StaticResource CaptionStyle}" />
                </VerticalStackLayout>
            </Border>

            <!-- Most Consistent -->
            <Border Style="{StaticResource CardBorderStyle}">
                <VerticalStackLayout Padding="12" Spacing="8">
                    <Label Text="[Target] Most Consistent" FontAttributes="Bold" FontSize="16" TextColor="{StaticResource PrimaryColor}" />
                    <Label x:Name="MostConsistentLabel" Text="-" FontSize="14" />
                    <Label x:Name="MostConsistentStatsLabel" Text="" Style="{StaticResource CaptionStyle}" />
                </VerticalStackLayout>
            </Border>

            <!-- Top Rated Player -->
            <Border Style="{StaticResource CardBorderStyle}">
                <VerticalStackLayout Padding="12" Spacing="8">
                    <Label Text="[Crown] Highest Rating" FontAttributes="Bold" FontSize="16" TextColor="{StaticResource PrimaryColor}" />
                    <Label x:Name="TopRatedLabel" Text="-" FontSize="14" />
                    <Label x:Name="TopRatedStatsLabel" Text="" Style="{StaticResource CaptionStyle}" />
                </VerticalStackLayout>
            </Border>

            <!-- Most Active Player -->
            <Border Style="{StaticResource CardBorderStyle}">
                <VerticalStackLayout Padding="12" Spacing="8">
                    <Label Text="[Calendar] Most Active Player" FontAttributes="Bold" FontSize="16" />
                    <Label x:Name="MostActiveLabel" Text="-" FontSize="14" />
                    <Label x:Name="MostActiveStatsLabel" Text="" Style="{StaticResource CaptionStyle}" />
                </VerticalStackLayout>
            </Border>

            <!-- Division MVPs -->
            <Label Text="Division MVPs" FontAttributes="Bold" FontSize="18" Margin="0,8,0,0" />
            <CollectionView x:Name="DivisionMVPsList" HeightRequest="200">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource CardBorderStyle}" Margin="0,0,0,8">
                            <Grid Padding="12" ColumnDefinitions="*,Auto">
                                <VerticalStackLayout Spacing="4">
                                    <Label Text="{Binding DivisionName}" FontAttributes="Bold" />
                                    <Label Text="{Binding PlayerName}" FontSize="14" />
                                    <Label Text="{Binding Stats}" Style="{StaticResource CaptionStyle}" />
                                </VerticalStackLayout>
                                <Label Grid.Column="1" Text="{Binding Rating}" FontAttributes="Bold" FontSize="20" TextColor="{StaticResource PrimaryColor}" VerticalOptions="Center" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Export Button -->
            <Button 
                Text="Export Awards to CSV"
                Clicked="OnExportAwardsClicked"
                BackgroundColor="{StaticResource SuccessColor}"
                TextColor="White"
                Margin="0,8,0,0" />

            <!-- Status -->
            <Label 
                x:Name="StatusLabel"
                Style="{StaticResource CaptionStyle}"
                HorizontalTextAlignment="Center" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
